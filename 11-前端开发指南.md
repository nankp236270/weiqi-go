# ğŸ¨ Weiqi-Go å‰ç«¯å¼€å‘æŒ‡å—

## ğŸ“‹ å‰ç«¯æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **Vue.js 3** - æ¸è¿›å¼ JavaScript æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨çš„ JavaScript è¶…é›†
- **Vite** - ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·

### UI åº“
- **Element Plus** - Vue 3 UI ç»„ä»¶åº“
- **TailwindCSS** - å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶ï¼ˆå¯é€‰ï¼‰

### çŠ¶æ€ç®¡ç†
- **Pinia** - Vue 3 å®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†åº“

### HTTP å®¢æˆ·ç«¯
- **Axios** - Promise åŸºç¡€çš„ HTTP å®¢æˆ·ç«¯

### WebSocket
- **åŸç”Ÿ WebSocket API** - å®æ—¶é€šä¿¡

---

## ğŸš€ ç¯å¢ƒå‡†å¤‡

### 1. å®‰è£… Node.js

```bash
# æ–¹æ³• 1: ä½¿ç”¨ nvmï¼ˆæ¨èï¼‰
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
source ~/.bashrc
nvm install 20
nvm use 20

# æ–¹æ³• 2: ä½¿ç”¨ç³»ç»ŸåŒ…ç®¡ç†å™¨
# Debian/Ubuntu
sudo apt update
sudo apt install nodejs npm

# éªŒè¯å®‰è£…
node --version  # åº”è¯¥æ˜¾ç¤º v20.x.x
npm --version   # åº”è¯¥æ˜¾ç¤º 10.x.x
```

### 2. åˆ›å»º Vue é¡¹ç›®

```bash
cd /home/zhuji/weiqi-go

# ä½¿ç”¨ Vite åˆ›å»ºé¡¹ç›®
npm create vite@latest weiqi-frontend -- --template vue-ts

# è¿›å…¥é¡¹ç›®ç›®å½•
cd weiqi-frontend

# å®‰è£…ä¾èµ–
npm install

# å®‰è£…é¢å¤–ä¾èµ–
npm install axios pinia element-plus
npm install -D @types/node

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

---

## ğŸ“ å‰ç«¯é¡¹ç›®ç»“æ„

```
weiqi-frontend/
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”‚   â””â”€â”€ favicon.ico
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/            # èµ„æºæ–‡ä»¶ï¼ˆå›¾ç‰‡ã€æ ·å¼ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â””â”€â”€ styles/
â”‚   â”‚       â””â”€â”€ main.css
â”‚   â”œâ”€â”€ components/        # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Board.vue      # æ£‹ç›˜ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Stone.vue      # æ£‹å­ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ GameCard.vue   # æ¸¸æˆå¡ç‰‡
â”‚   â”‚   â””â”€â”€ Header.vue     # é¡µé¢å¤´éƒ¨
â”‚   â”œâ”€â”€ views/             # é¡µé¢è§†å›¾
â”‚   â”‚   â”œâ”€â”€ Login.vue      # ç™»å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ Register.vue   # æ³¨å†Œé¡µé¢
â”‚   â”‚   â”œâ”€â”€ Lobby.vue      # æ¸¸æˆå¤§å…
â”‚   â”‚   â”œâ”€â”€ Game.vue       # æ¸¸æˆå¯¹æˆ˜é¡µé¢
â”‚   â”‚   â””â”€â”€ Profile.vue    # ç”¨æˆ·ä¿¡æ¯é¡µé¢
â”‚   â”œâ”€â”€ stores/            # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ auth.ts        # è®¤è¯çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ game.ts        # æ¸¸æˆçŠ¶æ€
â”‚   â”‚   â””â”€â”€ user.ts        # ç”¨æˆ·çŠ¶æ€
â”‚   â”œâ”€â”€ api/               # API æ¥å£
â”‚   â”‚   â”œâ”€â”€ auth.ts        # è®¤è¯ API
â”‚   â”‚   â”œâ”€â”€ game.ts        # æ¸¸æˆ API
â”‚   â”‚   â””â”€â”€ client.ts      # Axios é…ç½®
â”‚   â”œâ”€â”€ router/            # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ types/             # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ game.ts
â”‚   â”‚   â””â”€â”€ user.ts
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ websocket.ts   # WebSocket å·¥å…·
â”‚   â”‚   â””â”€â”€ storage.ts     # æœ¬åœ°å­˜å‚¨å·¥å…·
â”‚   â”œâ”€â”€ App.vue            # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.ts            # å…¥å£æ–‡ä»¶
â”œâ”€â”€ index.html             # HTML æ¨¡æ¿
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json          # TypeScript é…ç½®
â”œâ”€â”€ vite.config.ts         # Vite é…ç½®
â””â”€â”€ README.md              # å‰ç«¯æ–‡æ¡£
```

---

## ğŸ¯ å¼€å‘ä»»åŠ¡æ¸…å•

### é˜¶æ®µ 1ï¼šé¡¹ç›®åˆå§‹åŒ– âœ“
- [ ] å®‰è£… Node.js å’Œ npm
- [ ] åˆ›å»º Vue 3 + TypeScript é¡¹ç›®
- [ ] å®‰è£…å¿…è¦ä¾èµ–
- [ ] é…ç½® Vite å’Œ TypeScript
- [ ] é…ç½®ä»£ç†ï¼ˆè§£å†³è·¨åŸŸé—®é¢˜ï¼‰

### é˜¶æ®µ 2ï¼šåŸºç¡€è®¾æ–½
- [ ] é…ç½® Vue Router
- [ ] é…ç½® Pinia çŠ¶æ€ç®¡ç†
- [ ] é…ç½® Axiosï¼ˆæ‹¦æˆªå™¨ã€Token ç®¡ç†ï¼‰
- [ ] åˆ›å»º TypeScript ç±»å‹å®šä¹‰
- [ ] åˆ›å»ºå·¥å…·å‡½æ•°

### é˜¶æ®µ 3ï¼šè®¤è¯åŠŸèƒ½
- [ ] ç™»å½•é¡µé¢ UI
- [ ] æ³¨å†Œé¡µé¢ UI
- [ ] è®¤è¯ API é›†æˆ
- [ ] Token å­˜å‚¨å’Œç®¡ç†
- [ ] è·¯ç”±å®ˆå«ï¼ˆæœªç™»å½•è·³è½¬ï¼‰

### é˜¶æ®µ 4ï¼šæ¸¸æˆå¤§å…
- [ ] æ¸¸æˆå¤§å… UI
- [ ] æ¸¸æˆåˆ—è¡¨å±•ç¤º
- [ ] åˆ›å»ºæ¸¸æˆåŠŸèƒ½
- [ ] åŠ å…¥æ¸¸æˆåŠŸèƒ½
- [ ] æˆ‘çš„æ¸¸æˆåˆ—è¡¨

### é˜¶æ®µ 5ï¼šæ£‹ç›˜ç»„ä»¶
- [ ] æ£‹ç›˜ç½‘æ ¼ç»˜åˆ¶
- [ ] æ£‹å­æ¸²æŸ“
- [ ] è½å­äº¤äº’
- [ ] åæ ‡æ˜¾ç¤º
- [ ] æå­åŠ¨ç”»
- [ ] ä¸Šä¸€æ‰‹æ ‡è®°

### é˜¶æ®µ 6ï¼šå¯¹æˆ˜ç•Œé¢
- [ ] æ¸¸æˆå¯¹æˆ˜é¡µé¢å¸ƒå±€
- [ ] æ£‹ç›˜é›†æˆ
- [ ] ç©å®¶ä¿¡æ¯å±•ç¤º
- [ ] æå­æ•°æ˜¾ç¤º
- [ ] è™šæ‰‹æŒ‰é’®
- [ ] è®¤è¾“æŒ‰é’®
- [ ] æ¸¸æˆç»“æœå±•ç¤º

### é˜¶æ®µ 7ï¼šå®æ—¶åŠŸèƒ½ï¼ˆWebSocketï¼‰
- [ ] WebSocket è¿æ¥ç®¡ç†
- [ ] å®æ—¶çŠ¶æ€æ›´æ–°
- [ ] å¯¹æ‰‹è½å­é€šçŸ¥
- [ ] æ–­çº¿é‡è¿
- [ ] è¿æ¥çŠ¶æ€æ˜¾ç¤º

### é˜¶æ®µ 8ï¼šä¼˜åŒ–å’Œå®Œå–„
- [ ] å“åº”å¼è®¾è®¡ï¼ˆç§»åŠ¨ç«¯é€‚é…ï¼‰
- [ ] åŠ è½½çŠ¶æ€
- [ ] é”™è¯¯å¤„ç†
- [ ] ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- [ ] æ€§èƒ½ä¼˜åŒ–

---

## ğŸ”§ å…³é”®é…ç½®æ–‡ä»¶

### 1. vite.config.ts - Vite é…ç½®

```typescript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import path from 'path'

export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src')
    }
  },
  server: {
    port: 3000,
    proxy: {
      '/v1': {
        target: 'http://localhost:8080',
        changeOrigin: true
      }
    }
  }
})
```

### 2. src/api/client.ts - Axios é…ç½®

```typescript
import axios from 'axios'

const client = axios.create({
  baseURL: '/v1',
  timeout: 10000
})

// è¯·æ±‚æ‹¦æˆªå™¨ - æ·»åŠ  Token
client.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('token')
    if (token) {
      config.headers.Authorization = `Bearer ${token}`
    }
    return config
  },
  (error) => Promise.reject(error)
)

// å“åº”æ‹¦æˆªå™¨ - å¤„ç†é”™è¯¯
client.interceptors.response.use(
  (response) => response.data,
  (error) => {
    if (error.response?.status === 401) {
      // Token è¿‡æœŸï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
      localStorage.removeItem('token')
      window.location.href = '/login'
    }
    return Promise.reject(error)
  }
)

export default client
```

### 3. src/types/game.ts - æ¸¸æˆç±»å‹å®šä¹‰

```typescript
export interface Point {
  x: number
  y: number
}

export interface Board {
  size: number
  stones: number[][]  // 0=ç©º, 1=é»‘, 2=ç™½
}

export interface Game {
  id: string
  board: Board
  next_player: 'black' | 'white'
  passes: number
  game_over: boolean
  captures_by_b: number
  captures_by_w: number
  player_black_id?: string
  player_white_id?: string
  status: 'waiting' | 'playing' | 'finished'
  created_at: string
}

export interface MoveRequest {
  x: number
  y: number
}

export interface GameListItem {
  id: string
  status: string
  player_black_id?: string
  player_white_id?: string
  created_at: string
}
```

### 4. src/router/index.ts - è·¯ç”±é…ç½®

```typescript
import { createRouter, createWebHistory } from 'vue-router'
import Login from '@/views/Login.vue'
import Register from '@/views/Register.vue'
import Lobby from '@/views/Lobby.vue'
import Game from '@/views/Game.vue'

const router = createRouter({
  history: createWebHistory(),
  routes: [
    {
      path: '/',
      redirect: '/lobby'
    },
    {
      path: '/login',
      name: 'Login',
      component: Login
    },
    {
      path: '/register',
      name: 'Register',
      component: Register
    },
    {
      path: '/lobby',
      name: 'Lobby',
      component: Lobby,
      meta: { requiresAuth: true }
    },
    {
      path: '/game/:id',
      name: 'Game',
      component: Game,
      meta: { requiresAuth: true }
    }
  ]
})

// è·¯ç”±å®ˆå«
router.beforeEach((to, from, next) => {
  const token = localStorage.getItem('token')
  
  if (to.meta.requiresAuth && !token) {
    next('/login')
  } else if ((to.path === '/login' || to.path === '/register') && token) {
    next('/lobby')
  } else {
    next()
  }
})

export default router
```

---

## ğŸ¨ æ ¸å¿ƒç»„ä»¶ç¤ºä¾‹

### Board.vue - æ£‹ç›˜ç»„ä»¶

```vue
<template>
  <div class="board-container">
    <canvas
      ref="canvas"
      :width="canvasSize"
      :height="canvasSize"
      @click="handleClick"
    />
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, watch } from 'vue'
import type { Board, Point } from '@/types/game'

interface Props {
  board: Board
  disabled?: boolean
}

const props = defineProps<Props>()
const emit = defineEmits<{
  move: [point: Point]
}>()

const canvas = ref<HTMLCanvasElement>()
const canvasSize = 600
const gridSize = 19
const cellSize = canvasSize / (gridSize + 1)

// ç»˜åˆ¶æ£‹ç›˜
const drawBoard = () => {
  const ctx = canvas.value?.getContext('2d')
  if (!ctx) return

  // æ¸…ç©ºç”»å¸ƒ
  ctx.clearRect(0, 0, canvasSize, canvasSize)

  // ç»˜åˆ¶èƒŒæ™¯
  ctx.fillStyle = '#DCB35C'
  ctx.fillRect(0, 0, canvasSize, canvasSize)

  // ç»˜åˆ¶ç½‘æ ¼
  ctx.strokeStyle = '#000'
  ctx.lineWidth = 1

  for (let i = 0; i < gridSize; i++) {
    const pos = cellSize * (i + 1)
    
    // æ¨ªçº¿
    ctx.beginPath()
    ctx.moveTo(cellSize, pos)
    ctx.lineTo(canvasSize - cellSize, pos)
    ctx.stroke()
    
    // ç«–çº¿
    ctx.beginPath()
    ctx.moveTo(pos, cellSize)
    ctx.lineTo(pos, canvasSize - cellSize)
    ctx.stroke()
  }

  // ç»˜åˆ¶æ˜Ÿä½
  const starPoints = [3, 9, 15]
  ctx.fillStyle = '#000'
  starPoints.forEach(x => {
    starPoints.forEach(y => {
      const px = cellSize * (x + 1)
      const py = cellSize * (y + 1)
      ctx.beginPath()
      ctx.arc(px, py, 4, 0, 2 * Math.PI)
      ctx.fill()
    })
  })

  // ç»˜åˆ¶æ£‹å­
  drawStones()
}

// ç»˜åˆ¶æ£‹å­
const drawStones = () => {
  const ctx = canvas.value?.getContext('2d')
  if (!ctx) return

  for (let x = 0; x < gridSize; x++) {
    for (let y = 0; y < gridSize; y++) {
      const stone = props.board.stones[y][x]
      if (stone !== 0) {
        const px = cellSize * (x + 1)
        const py = cellSize * (y + 1)
        const radius = cellSize * 0.45

        // ç»˜åˆ¶æ£‹å­
        ctx.beginPath()
        ctx.arc(px, py, radius, 0, 2 * Math.PI)
        ctx.fillStyle = stone === 1 ? '#000' : '#fff'
        ctx.fill()
        ctx.strokeStyle = '#000'
        ctx.lineWidth = 1
        ctx.stroke()
      }
    }
  }
}

// å¤„ç†ç‚¹å‡»
const handleClick = (event: MouseEvent) => {
  if (props.disabled) return

  const rect = canvas.value?.getBoundingClientRect()
  if (!rect) return

  const x = event.clientX - rect.left
  const y = event.clientY - rect.top

  // è®¡ç®—æœ€è¿‘çš„äº¤å‰ç‚¹
  const gridX = Math.round(x / cellSize) - 1
  const gridY = Math.round(y / cellSize) - 1

  if (gridX >= 0 && gridX < gridSize && gridY >= 0 && gridY < gridSize) {
    emit('move', { x: gridX, y: gridY })
  }
}

onMounted(() => {
  drawBoard()
})

watch(() => props.board, () => {
  drawBoard()
}, { deep: true })
</script>

<style scoped>
.board-container {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
}

canvas {
  cursor: pointer;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}
</style>
```

---

## ğŸš€ å¼€å‘æµç¨‹

### 1. æœ¬åœ°å¼€å‘

```bash
cd weiqi-frontend
npm run dev
```

è®¿é—® http://localhost:3000

### 2. æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

ç”Ÿæˆçš„æ–‡ä»¶åœ¨ `dist/` ç›®å½•

### 3. Docker éƒ¨ç½²

åˆ›å»º `weiqi-frontend/Dockerfile`:

```dockerfile
# æ„å»ºé˜¶æ®µ
FROM node:20-alpine AS builder

WORKDIR /app

COPY package*.json ./
RUN npm ci

COPY . .
RUN npm run build

# ç”Ÿäº§é˜¶æ®µ
FROM nginx:alpine

COPY --from=builder /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/conf.d/default.conf

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]
```

åˆ›å»º `weiqi-frontend/nginx.conf`:

```nginx
server {
    listen 80;
    server_name localhost;
    root /usr/share/nginx/html;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    location /v1 {
        proxy_pass http://weiqi-backend:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

æ›´æ–° `docker-compose.yml`:

```yaml
services:
  # ... ç°æœ‰æœåŠ¡ ...

  weiqi-frontend:
    build:
      context: ./weiqi-frontend
      dockerfile: Dockerfile
    ports:
      - "80:80"
    depends_on:
      - weiqi-backend
    networks:
      - weiqi-network
```

---

## ğŸ“š å­¦ä¹ èµ„æº

### Vue 3
- å®˜æ–¹æ–‡æ¡£: https://cn.vuejs.org/
- Vue Router: https://router.vuejs.org/zh/
- Pinia: https://pinia.vuejs.org/zh/

### TypeScript
- å®˜æ–¹æ–‡æ¡£: https://www.typescriptlang.org/zh/
- TypeScript å…¥é—¨æ•™ç¨‹: https://ts.xcatliu.com/

### Element Plus
- å®˜æ–¹æ–‡æ¡£: https://element-plus.org/zh-CN/

### Vite
- å®˜æ–¹æ–‡æ¡£: https://cn.vitejs.dev/

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **å®‰è£… Node.js**
2. **åˆ›å»º Vue é¡¹ç›®**
3. **å®ç°ç™»å½•/æ³¨å†Œé¡µé¢**
4. **å®ç°æ¸¸æˆå¤§å…**
5. **å®ç°æ£‹ç›˜ç»„ä»¶**
6. **å®ç°å¯¹æˆ˜ç•Œé¢**
7. **é›†æˆ WebSocket**

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**æœ€åæ›´æ–°**: 2025å¹´12æœˆ3æ—¥  
**çŠ¶æ€**: å¾…å¼€å‘

