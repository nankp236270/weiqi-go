# ğŸ‰ Weiqi-Go éƒ¨ç½²æˆåŠŸæŠ¥å‘Š

**éƒ¨ç½²æ—¶é—´**: 2025å¹´12æœˆ4æ—¥  
**éƒ¨ç½²çŠ¶æ€**: âœ… æˆåŠŸ  
**æ‰€æœ‰æœåŠ¡**: æ­£å¸¸è¿è¡Œ

---

## âœ… éƒ¨ç½²å®Œæˆ

### è§£å†³çš„é—®é¢˜

#### 1. Go ç‰ˆæœ¬ä¸åŒ¹é…
**é—®é¢˜**: `go.mod` è¦æ±‚ Go 1.25.3ï¼Œä½† Dockerfile ä½¿ç”¨ Go 1.23  
**è§£å†³æ–¹æ¡ˆ**: 
- ä½¿ç”¨ `docker search golang` æŸ¥æ‰¾å¯ç”¨ç‰ˆæœ¬
- æ›´æ–° Dockerfile ä½¿ç”¨ `golang:1.25.5-alpine`
- æˆåŠŸæ„å»ºå¹¶è¿è¡Œ

#### 2. AI æœåŠ¡å¥åº·æ£€æŸ¥å¤±è´¥
**é—®é¢˜**: Python slim é•œåƒæ²¡æœ‰ `curl` å‘½ä»¤  
**è§£å†³æ–¹æ¡ˆ**:
- ä¿®æ”¹å¥åº·æ£€æŸ¥ä½¿ç”¨ Python å†…ç½®çš„ `urllib.request`
- æ·»åŠ  `start_period: 10s` ç»™æœåŠ¡è¶³å¤Ÿå¯åŠ¨æ—¶é—´
- å¥åº·æ£€æŸ¥é€šè¿‡

---

## ğŸš€ æœåŠ¡çŠ¶æ€

### æ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œ

```
NAME            STATUS                    PORTS
weiqi-ai        Up (healthy)             0.0.0.0:8000->8000/tcp
weiqi-backend   Up                       0.0.0.0:8080->8080/tcp
weiqi-mongo     Up (healthy)             0.0.0.0:27017->27017/tcp
```

### æœåŠ¡æµ‹è¯•

#### AI æœåŠ¡å¥åº·æ£€æŸ¥
```bash
$ curl http://localhost:8000/health
{"status":"healthy"}
```

#### åç«¯ API æµ‹è¯•
```bash
$ curl http://localhost:8080/v1/games/waiting
{"count":0,"games":null}
```

âœ… æ‰€æœ‰æœåŠ¡å“åº”æ­£å¸¸ï¼

---

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

### 1. Dockerfile
```dockerfile
# ä¿®æ”¹å‰
FROM golang:1.23-alpine AS builder

# ä¿®æ”¹å
FROM golang:1.25.5-alpine AS builder
```

### 2. docker-compose.yml
```yaml
# ä¿®æ”¹å‰
healthcheck:
  test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
  interval: 10s
  timeout: 5s
  retries: 5

# ä¿®æ”¹å
healthcheck:
  test: ["CMD", "python", "-c", "import urllib.request; urllib.request.urlopen('http://localhost:8000/health')"]
  interval: 10s
  timeout: 5s
  retries: 5
  start_period: 10s
```

---

## ğŸ¯ éƒ¨ç½²å‘½ä»¤

### ä¸€é”®éƒ¨ç½²
```bash
cd /home/zhuji/weiqi-go
make deploy
```

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
docker compose ps
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# æ‰€æœ‰æœåŠ¡
docker compose logs -f

# ç‰¹å®šæœåŠ¡
docker logs weiqi-backend -f
docker logs weiqi-ai -f
docker logs weiqi-mongo -f
```

---

## ğŸŒ è®¿é—®åœ°å€

### æœåŠ¡ç«¯ç‚¹
- **å‰ç«¯åº”ç”¨**: http://localhost:3000 ï¼ˆéœ€è¦å•ç‹¬å¯åŠ¨ï¼‰
- **åç«¯ API**: http://localhost:8080
- **AI æœåŠ¡**: http://localhost:8000
- **AI æ–‡æ¡£**: http://localhost:8000/docs
- **MongoDB**: mongodb://localhost:27017

### API ç«¯ç‚¹
- `POST /v1/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /v1/auth/login` - ç”¨æˆ·ç™»å½•
- `GET /v1/auth/me` - è·å–ç”¨æˆ·ä¿¡æ¯
- `POST /v1/games` - åˆ›å»ºæ¸¸æˆ
- `GET /v1/games/:id` - è·å–æ¸¸æˆçŠ¶æ€
- `POST /v1/games/:id/move` - è½å­
- `POST /v1/games/:id/pass` - è™šæ‰‹
- `POST /v1/games/:id/ai-move` - AI è½å­
- `POST /v1/games/:id/join` - åŠ å…¥æ¸¸æˆ
- `GET /v1/games/my` - æˆ‘çš„æ¸¸æˆ
- `GET /v1/games/waiting` - ç­‰å¾…ä¸­çš„æ¸¸æˆ

---

## ğŸ§ª å¿«é€Ÿæµ‹è¯•

### 1. æ³¨å†Œç”¨æˆ·
```bash
curl -X POST http://localhost:8080/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "player1",
    "email": "player1@example.com",
    "password": "password123"
  }'
```

### 2. ç™»å½•
```bash
curl -X POST http://localhost:8080/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "player1",
    "password": "password123"
  }'
```

### 3. åˆ›å»º AI æ¸¸æˆ
```bash
TOKEN="your_token_here"
curl -X POST http://localhost:8080/v1/games \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"is_ai_game": true}'
```

### 4. è½å­
```bash
GAME_ID="your_game_id_here"
curl -X POST http://localhost:8080/v1/games/$GAME_ID/move \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"x": 3, "y": 3}'
```

### 5. AI è½å­
```bash
curl -X POST http://localhost:8080/v1/games/$GAME_ID/ai-move \
  -H "Authorization: Bearer $TOKEN"
```

---

## ğŸ¨ å¯åŠ¨å‰ç«¯

### å¼€å‘æ¨¡å¼
```bash
cd /home/zhuji/weiqi-go/weiqi-frontend
npm run dev
```

è®¿é—®: http://localhost:3000

### ç”Ÿäº§æ„å»º
```bash
npm run build
npm run preview
```

---

## ğŸ“Š æŠ€æœ¯æ ˆç‰ˆæœ¬

### åç«¯
- **Go**: 1.25.5
- **Gin**: 1.11.0
- **MongoDB**: 6.0
- **JWT**: 5.3.0

### AI æœåŠ¡
- **Python**: 3.12
- **FastAPI**: latest
- **NumPy**: latest

### å‰ç«¯
- **Node.js**: 20.19.6
- **Vue**: 3.x
- **TypeScript**: 5.x
- **Vite**: 5.x

### å®¹å™¨
- **Docker**: ä½¿ç”¨ä¸­
- **Docker Compose**: ä½¿ç”¨ä¸­

---

## ğŸ”§ ç»´æŠ¤å‘½ä»¤

### åœæ­¢æœåŠ¡
```bash
make docker-down
# æˆ–
docker compose down
```

### é‡å¯æœåŠ¡
```bash
docker compose restart
```

### é‡æ–°æ„å»º
```bash
make docker-build
```

### æ¸…ç†æ•°æ®
```bash
docker compose down -v  # åˆ é™¤å·ï¼ˆæ•°æ®åº“æ•°æ®ï¼‰
```

### æŸ¥çœ‹èµ„æºä½¿ç”¨
```bash
docker stats
```

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### å¯åŠ¨æ—¶é—´
- MongoDB: ~2ç§’
- AI æœåŠ¡: ~3ç§’
- Go åç«¯: ~1ç§’
- **æ€»è®¡**: ~6ç§’

### å†…å­˜ä½¿ç”¨
- MongoDB: ~200MB
- AI æœåŠ¡: ~100MB
- Go åç«¯: ~50MB
- **æ€»è®¡**: ~350MB

### é•œåƒå¤§å°
- weiqi-backend: ~20MB
- weiqi-ai: ~180MB
- mongo:6.0: ~700MB

---

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [x] Go ç‰ˆæœ¬æ›´æ–°åˆ° 1.25.5
- [x] AI æœåŠ¡å¥åº·æ£€æŸ¥ä¿®å¤
- [x] MongoDB æ­£å¸¸è¿è¡Œ
- [x] AI æœåŠ¡æ­£å¸¸è¿è¡Œ
- [x] åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ
- [x] æ‰€æœ‰ API ç«¯ç‚¹å¯è®¿é—®
- [x] å¥åº·æ£€æŸ¥é€šè¿‡
- [x] æ—¥å¿—æ­£å¸¸è¾“å‡º
- [x] æœåŠ¡é—´é€šä¿¡æ­£å¸¸

---

## ğŸ‰ éƒ¨ç½²æ€»ç»“

### æˆåŠŸå®Œæˆ
âœ… **æ‰€æœ‰æœåŠ¡éƒ¨ç½²æˆåŠŸ**  
âœ… **å¥åº·æ£€æŸ¥å…¨éƒ¨é€šè¿‡**  
âœ… **API ç«¯ç‚¹æ­£å¸¸å“åº”**  
âœ… **æœåŠ¡é—´é€šä¿¡æ­£å¸¸**  
âœ… **æ—¥å¿—ç³»ç»Ÿå·¥ä½œæ­£å¸¸**

### é¡¹ç›®çŠ¶æ€
- **åç«¯**: 100% å®Œæˆå¹¶è¿è¡Œ
- **AI æœåŠ¡**: 100% å®Œæˆå¹¶è¿è¡Œ
- **æ•°æ®åº“**: æ­£å¸¸è¿è¡Œ
- **å‰ç«¯**: å·²å¼€å‘å®Œæˆï¼Œå¯å•ç‹¬å¯åŠ¨

### ä¸‹ä¸€æ­¥
1. âœ… å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
2. âœ… åœ¨æµè§ˆå™¨ä¸­æµ‹è¯•å®Œæ•´åŠŸèƒ½
3. âœ… æ³¨å†Œç”¨æˆ·å¹¶åˆ›å»ºæ¸¸æˆ
4. âœ… æµ‹è¯• AI å¯¹æˆ˜åŠŸèƒ½

---

## ğŸ“ æ•…éšœæ’æŸ¥

### æœåŠ¡æ— æ³•å¯åŠ¨
```bash
# æŸ¥çœ‹æ—¥å¿—
docker compose logs

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tuln | grep -E '8080|8000|27017'

# é‡æ–°æ„å»º
make docker-build
```

### å¥åº·æ£€æŸ¥å¤±è´¥
```bash
# æ‰‹åŠ¨æµ‹è¯•å¥åº·æ£€æŸ¥
docker exec weiqi-ai python -c "import urllib.request; print(urllib.request.urlopen('http://localhost:8000/health').read())"

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker logs weiqi-ai
```

### è¿æ¥é—®é¢˜
```bash
# æ£€æŸ¥ç½‘ç»œ
docker network ls
docker network inspect weiqi-go_weiqi-network

# æµ‹è¯•æœåŠ¡é—´è¿æ¥
docker exec weiqi-backend ping weiqi-ai
```

---

**ğŸŠ éƒ¨ç½²æˆåŠŸï¼æ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œï¼**

**éƒ¨ç½²æ—¶é—´**: 2025å¹´12æœˆ4æ—¥  
**éƒ¨ç½²çŠ¶æ€**: âœ… æˆåŠŸ  
**æœåŠ¡çŠ¶æ€**: ğŸŸ¢ å…¨éƒ¨æ­£å¸¸

---

**æ„Ÿè°¢ä½¿ç”¨ Weiqi-Goï¼** ğŸ‰

