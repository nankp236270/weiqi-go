# ðŸš€ Weiqi-Go å¿«é€Ÿå¼€å§‹æŒ‡å—

## å‰ç½®è¦æ±‚

- Docker å’Œ Docker Compose
- Go 1.25+ ï¼ˆå¦‚æžœè¦æœ¬åœ°è¿è¡Œï¼‰
- Python 3.12+ ï¼ˆå¦‚æžœè¦æœ¬åœ°è¿è¡Œï¼‰

## æ–¹å¼ä¸€ï¼šä½¿ç”¨ Dockerï¼ˆæŽ¨èï¼‰

### 1. é…ç½®çŽ¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
cat > .env << 'EOF'
# MongoDB é…ç½®
MONGO_USER=admin
MONGO_PASS=your_secure_password
MONGO_URI=mongodb://admin:your_secure_password@mongo:27017

# æ•°æ®åº“é…ç½®
DB_NAME=weiqi
COLLECTION_NAME=games

# æœåŠ¡å™¨é…ç½®
SERVER_PORT=8080

# AI æœåŠ¡é…ç½®
AI_SERVICE_URL=http://weiqi-ai:8000
EOF
```

### 2. å¯åŠ¨æ‰€æœ‰æœåŠ¡

```bash
# æž„å»ºå¹¶å¯åŠ¨
docker compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker compose logs -f

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker compose ps
```

### 3. æµ‹è¯• API

```bash
# æµ‹è¯• AI æœåŠ¡å¥åº·çŠ¶æ€
curl http://localhost:8000/health

# åˆ›å»ºæ¸¸æˆ
curl -X POST http://localhost:8080/v1/games

# ç¤ºä¾‹å“åº”ï¼š
# {
#   "game_id": "550e8400-e29b-41d4-a716-446655440000",
#   "state": { ... }
# }
```

## æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘

### 1. å¯åŠ¨ MongoDB å’Œ AI æœåŠ¡

```bash
docker compose up -d mongo weiqi-ai
```

### 2. è¿è¡Œ Go åŽç«¯

```bash
# å®‰è£…ä¾èµ–
go mod download

# è¿è¡Œæµ‹è¯•
go test ./... -v

# å¯åŠ¨æœåŠ¡å™¨
go run main.go
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:8080` å¯åŠ¨

## ðŸŽ® API ä½¿ç”¨ç¤ºä¾‹

### 1. åˆ›å»ºæ–°æ¸¸æˆ

```bash
GAME_ID=$(curl -s -X POST http://localhost:8080/v1/games | jq -r '.game_id')
echo "æ¸¸æˆ ID: $GAME_ID"
```

### 2. çŽ©å®¶è½å­ï¼ˆé»‘æ£‹ï¼‰

```bash
curl -X POST http://localhost:8080/v1/games/$GAME_ID/move \
  -H "Content-Type: application/json" \
  -d '{"x": 3, "y": 3}'
```

### 3. AI è½å­ï¼ˆç™½æ£‹ï¼‰

```bash
curl -X POST http://localhost:8080/v1/games/$GAME_ID/ai-move
```

### 4. æŸ¥çœ‹æ¸¸æˆçŠ¶æ€

```bash
curl http://localhost:8080/v1/games/$GAME_ID | jq
```

### 5. è™šæ‰‹

```bash
curl -X POST http://localhost:8080/v1/games/$GAME_ID/pass
```

### 6. å®Œæ•´çš„å¯¹å±€ç¤ºä¾‹

```bash
#!/bin/bash

# åˆ›å»ºæ¸¸æˆ
echo "åˆ›å»ºæ–°æ¸¸æˆ..."
GAME_ID=$(curl -s -X POST http://localhost:8080/v1/games | jq -r '.game_id')
echo "æ¸¸æˆ ID: $GAME_ID"

# é»‘æ£‹è½å­
echo -e "\né»‘æ£‹è½å­ (3,3)..."
curl -s -X POST http://localhost:8080/v1/games/$GAME_ID/move \
  -H "Content-Type: application/json" \
  -d '{"x": 3, "y": 3}' | jq '.next_player'

# AIï¼ˆç™½æ£‹ï¼‰è½å­
echo -e "\nAI è½å­..."
curl -s -X POST http://localhost:8080/v1/games/$GAME_ID/ai-move | jq '.move'

# é»‘æ£‹å†è½å­
echo -e "\né»‘æ£‹è½å­ (3,4)..."
curl -s -X POST http://localhost:8080/v1/games/$GAME_ID/move \
  -H "Content-Type: application/json" \
  -d '{"x": 3, "y": 4}' | jq '.next_player'

# AI å†è½å­
echo -e "\nAI è½å­..."
curl -s -X POST http://localhost:8080/v1/games/$GAME_ID/ai-move | jq '.move'

# æŸ¥çœ‹æœ€ç»ˆçŠ¶æ€
echo -e "\næ¸¸æˆçŠ¶æ€:"
curl -s http://localhost:8080/v1/games/$GAME_ID | jq '{next_player, passes, game_over}'
```

## ðŸ§ª è¿è¡Œæµ‹è¯•

### Go æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
go test ./... -v

# åªè¿è¡Œæ¸¸æˆå¼•æ“Žæµ‹è¯•
go test ./game -v

# åªè¿è¡Œ API æµ‹è¯•
go test ./api -v

# å¸¦è¦†ç›–çŽ‡
go test ./... -cover
```

### Python æµ‹è¯•

```bash
cd weiqi-ai

# ä½¿ç”¨ç®€å•æµ‹è¯•è„šæœ¬
python3 test_simple.py

# ä½¿ç”¨ pytestï¼ˆéœ€è¦å…ˆå®‰è£…ä¾èµ–ï¼‰
pip install -r requirements.txt
pytest tests/ -v
```

## ðŸ› æ•…éšœæŽ’æŸ¥

### é—®é¢˜ 1ï¼šMongoDB è¿žæŽ¥å¤±è´¥

```bash
# æ£€æŸ¥ MongoDB æ˜¯å¦è¿è¡Œ
docker compose ps mongo

# æŸ¥çœ‹ MongoDB æ—¥å¿—
docker compose logs mongo

# é‡å¯ MongoDB
docker compose restart mongo
```

### é—®é¢˜ 2ï¼šAI æœåŠ¡æ— æ³•è®¿é—®

```bash
# æ£€æŸ¥ AI æœåŠ¡çŠ¶æ€
curl http://localhost:8000/health

# æŸ¥çœ‹ AI æœåŠ¡æ—¥å¿—
docker compose logs weiqi-ai

# é‡å¯ AI æœåŠ¡
docker compose restart weiqi-ai
```

### é—®é¢˜ 3ï¼šGo ç¼–è¯‘é”™è¯¯

```bash
# æ¸…ç†å¹¶é‡æ–°ä¸‹è½½ä¾èµ–
go clean -modcache
go mod download
go mod tidy
```

## ðŸ“Š ç›‘æŽ§å’Œè°ƒè¯•

### æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—

```bash
docker compose logs -f
```

### åªæŸ¥çœ‹ç‰¹å®šæœåŠ¡

```bash
docker compose logs -f weiqi-ai
docker compose logs -f mongo
```

### è¿›å…¥å®¹å™¨è°ƒè¯•

```bash
# è¿›å…¥ AI æœåŠ¡å®¹å™¨
docker compose exec weiqi-ai /bin/bash

# è¿›å…¥ MongoDB å®¹å™¨
docker compose exec mongo mongosh
```

## ðŸ›‘ åœæ­¢æœåŠ¡

```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
docker compose down

# åœæ­¢å¹¶åˆ é™¤æ•°æ®å·
docker compose down -v

# åœæ­¢å¹¶åˆ é™¤é•œåƒ
docker compose down --rmi all
```

## ðŸ“ å¼€å‘å·¥ä½œæµ

### 1. ä¿®æ”¹ Python AI ä»£ç 

```bash
# ä¿®æ”¹ä»£ç åŽé‡æ–°æž„å»º
docker compose build weiqi-ai
docker compose up -d weiqi-ai

# æˆ–è€…ä½¿ç”¨çƒ­é‡è½½ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
cd weiqi-ai
uvicorn api.main:app --reload --host 0.0.0.0 --port 8000
```

### 2. ä¿®æ”¹ Go ä»£ç 

```bash
# ä¿®æ”¹åŽç›´æŽ¥è¿è¡Œ
go run main.go

# æˆ–è€…é‡æ–°ç¼–è¯‘
go build -o weiqi-go-server .
./weiqi-go-server
```

### 3. è¿è¡Œæµ‹è¯•

```bash
# æ¯æ¬¡ä¿®æ”¹åŽè¿è¡Œæµ‹è¯•
go test ./... -v
cd weiqi-ai && python3 test_simple.py
```

## ðŸŽ¯ ä¸‹ä¸€æ­¥

1. **æ·»åŠ å‰ç«¯**ï¼šä½¿ç”¨ Vue.js åˆ›å»º Web ç•Œé¢
2. **ç”¨æˆ·ç³»ç»Ÿ**ï¼šå®žçŽ°æ³¨å†Œã€ç™»å½•å’Œè®¤è¯
3. **å‡çº§ AI**ï¼šä»Žéšæœº AI å‡çº§åˆ° MCTS
4. **å®žæ—¶å¯¹æˆ˜**ï¼šä½¿ç”¨ WebSocket å®žçŽ°å®žæ—¶å¯¹å±€

## ðŸ“š æ›´å¤šä¿¡æ¯

- è¯¦ç»†çš„é¡¹ç›®è¿›å±•ï¼šæŸ¥çœ‹ `é¡¹ç›®è¿›å±•æ€»ç»“.md`
- å¼€å‘è§„åˆ™ï¼šæŸ¥çœ‹ `å¼€å‘è§„åˆ™.md`
- å›´æ£‹è§„åˆ™è§„èŒƒï¼šæŸ¥çœ‹ `RULES.md`
- API æ–‡æ¡£ï¼šå¯åŠ¨æœåŠ¡åŽè®¿é—® `http://localhost:8000/docs`

## ðŸ’¡ æç¤º

- ä½¿ç”¨ `jq` å·¥å…·å¯ä»¥æ›´å¥½åœ°æ ¼å¼åŒ– JSON è¾“å‡º
- ä½¿ç”¨ Postman æˆ– Insomnia å¯ä»¥æ›´æ–¹ä¾¿åœ°æµ‹è¯• API
- æŸ¥çœ‹ `api/server_test.go` äº†è§£æ›´å¤š API ä½¿ç”¨ç¤ºä¾‹

---

**ç¥ä½ å¼€å‘æ„‰å¿«ï¼** ðŸŽ‰

